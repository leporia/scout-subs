{% extends 'registration/base.html' %}

{% block title %}Modifica documento{% endblock %}

{% block nav %}
    <a style="margin-left: 10px;" href="{% url 'index' %}" class="breadcrumb">Home</a>
    <a href="#!" class="breadcrumb hide-on-med-and-down">Modifica Documento</a>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col l8 offset-l2 s12">
    <div class="card-panel">
      <div class="row">
        <form id="form" action="{% url 'edit'%}" method="post" class="col s12">
          {% csrf_token %}
          <input type="hidden" name="doc" value="{{doc.id}}">
          <div class="row">
            <div class="input-field col s12">
              <select>
                <option disabled selected>{{doc.document_type.name}}</option>
              </select>
              <label>Documento</label>
            </div>
          </div>
          {% if personal_data %}
            <div class="row">
              <div class="col s12">
                <a style="pointer-events: none; cursor: default;" class="btn red lighten-1"> Il documento conterr&agrave; le informazioni personali, prego verificare che siano corrette e aggiornate</a>
              </div>
            </div>
          {% endif %}
          {% if medical_data %}
            <div class="row">
              <div class="col s12">
                <a style="pointer-events: none; cursor: default;" class="btn red lighten-1"> Il documento conterr&agrave; le informazioni mediche, prego verificare che siano corrette e aggiornate</a>
              </div>
            </div>
          {% endif %}
          {% if custom_message %}
            <div class="row">
              <div class="col s12">
                <a style="pointer-events: none; cursor: default;" class="btn red lighten-1">{{custom_message_text}}</a>
              </div>
            </div>
          {% endif %}
          {% if custom_data %}
            {% for key in keys %}
              <div class="row">
                <div class="input-field col s12">
                  <input value="{{key.1}}" name="{{key.0.id}}" id="{{key.0.id}}" type="text">
                  <label for="{{key.0.id}}">{{key.0.key}}</label>
                </div>
              </div>
            {% endfor %}
          {% endif %}
          <div class="row">
            <div class="col s12">
              <br>
              <a class="btn waves-effect waves-light" onclick="window.history.back();" >
                <i class="material-icons left">navigate_before</i>Indietro
              </a>
              <a class="btn waves-effect waves-light" onclick="send('save')" >Salva
                <i class="material-icons right">save</i>
              </a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
$(document).ready(function(){
    $('select').formSelect();
    {% if error %}
      M.toast({html: '{{ error_text}}', classes: 'orange'})
    {% endif %}
  });
function send(id) {
  var form = document.getElementById('form')
  form.submit()
}
{% endblock %}