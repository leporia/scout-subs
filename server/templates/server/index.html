{% extends 'registration/base_admin.html' %}

{% block title %}Admin{% endblock %}

{% block breadcrumb %}
    <a href="#!" class="breadcrumb hide-on-med-and-down">Admin</a>
{% endblock %}

{% block content %}
<div class="row">
  {% if user.is_staff %}
  <div class="col l5 s12">
    <div class="card large">
      <div class="card-content">
        <p>
        <table>
            <tr>
                <th>Username</th>
                <th>Nome</th>
                <th>Cognome</th>
            </tr>
            {% for user in users %}
                <tr>
                {% for att in user %}
                    <td>{{att}}</td>
                {% endfor %}
                </tr>
            {% endfor %}
        </table> 
        </p>
      </div>
      <div class="card-action">
        <div class="hide-on-med-and-down">
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'ulist' %}">Utenti</a>
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'uapprove' %}">Approva utente</a>
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'request' %}">Richiedi dati</a>
        </div>

        <div class="hide-on-large-only">
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'ulist' %}">Utenti</a>
          <br>
          <br>
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'uapprove' %}">Approva utente</a>
          <br>
          <br>
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'request' %}">Richiedi dati</a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  {% if user.is_staff %}
  <div class="col l7 s12">
  {% else %}
  <div class="col s12">
  {% endif %}
    <div class="card large">
      <div class="card-content">
        <form id="form" action="{% url 'server'%}" method="post">
          {% csrf_token %}
          <div class="row">
            <div class="col s12">
              <div id="select_switch" class="switch col s12">
                Documenti visibili ad aggiunti<br class="hide-on-med-and-up">
                <label>
                  No
                  <input onclick="execute_confirm()" name="doc_view" type="checkbox" {{doc_view_check}}>
                  <span class="lever"></span>
                  Si
                </label>
              </div>
              <a style="display: none" id="send_button" class="waves-effect waves-light btn green" onclick="form.submit()"><i class="material-icons left">check</i> Applica</a>
            </div>
          </div>
        </form>
        <ul class="collection">
          {% for doctype in docs %}
            <li class="collection-item">
                {% if not doctype.0.enabled %}
                    <i class="material-icons left">visibility_off</i>
                {% endif %}
                {% if not doctype.0.group_private %}
                    <i class="material-icons left">public</i>
                {% endif %}
                {% if doctype.0.auto_sign %}
                  <i class="material-icons left">assignment_turned_in</i>
                {% endif %}
                {{doctype.0.name}}
                <span class="new badge {{color}}" data-badge-caption="">{{doctype.1}}</span>
          {% endfor %}
        </ul>
      </div>
      <div class="card-action">
        <div class="hide-on-med-and-down">
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'doctype' %}">Tipi</a>
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'doclist' %}">Documenti</a>
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'docapprove' %}">Approva documento</a>
          <a class="waves-effect waves-light btn {{color}}" href="{% url 'docupload' %}">Carica firma</a>
        </div>

        <div class="hide-on-large-only">
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'doctype' %}">Tipi</a>
          <br>
          <br>
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'doclist' %}">Documenti</a>
          <br>
          <br>
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'docapprove' %}">Approva documento</a>
          <br>
          <br>
          <a class="col s12 waves-effect waves-light btn {{color}}" href="{% url 'docupload' %}">Carica firma</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
function execute_confirm() {
  var selection = document.getElementById('select_switch')
  var button = document.getElementById('send_button')
  selection.style.display = "none"
  button.style.display = "inline-block"
  {% if doc_view_check == 'checked="checked"'%}
    button.innerHTML = "Applica (gli aggiunti <b>NON</b> potranno vedere i documenti)"
  {% else %}
    button.innerHTML = "Applica (gli aggiunti <b>POTRANNO</b> vedere i documenti)"
  {% endif %}
}
{% endblock %}